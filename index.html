<html>
<body>
<h1>Likely.js is a Python like HTML templating language</h1>

<p>This template language offers a python style indentation for HTML generation
as well an automatic bi-directionnal data binding between the DOM and the data Model.</p>

<p><a href="https://github.com/batiste/likely.js">On github</a></p>

<h2>Template</h2>
<textarea id="input" style="width:500px;height:250px;" spellcheck="false">ul
 for number in list
  li id="id-{{ number }}"
   if number.hello
     "Number is an object with an hello attribute of value "
     input value="{{ number.hello }}"
   elseif number < limit
    label style="color:red"
     "Number {{ number }} is smaller than {{ limit }}."
     input value="{{ number }}"
   elseif number==limit
    label
     "Number is {{ limit }}."
     input value="{{ number }}"
   else
    label style="color:green"
     "Number {{ number }} is bigger than {{ limit }}."
     input value="{{ number }}"

</textarea>

<h2>Data</h2>

<textarea id="data" style="width:500px;height:100px;" spellcheck="false">
{"list":[0,{"hello":"world"},2,3,5,6,7,8,9], "limit":5}
</textarea>

<h2>Rendered result</h2>
<div id="resulth">
</div>

<h2>Html output</h2>
<div id="result">
</div>


<script src="likely.js"></script>

<script>

var r = document.getElementById("result");
var rh = document.getElementById("resulth");
var i = document.getElementById("input");
var d = document.getElementById("data");
var t, render;
function show() {
  try {
    var data = JSON.parse(d.value);
    t = likely.Template(i.value);
    var context = likely.Context(data);
    render = t.render(context);
  } catch(err) {
    render = String(err);
  }
  r.innerHTML = render.replace(/</g, "&lt;").replace(/>/g, "&gt;");
  rh.innerHTML = render;
}
i.onkeyup = show;
show();
d.onkeyup = show;


document.onkeyup = function(event) {
  event = event || window.event
  var target = event.target || event.srcElement;
  if(target.getAttribute("data-path")) {
    var data = JSON.parse(d.value);
    likely.updateData(data, target);
    d.value = JSON.stringify(data);
  }
}



</script>
